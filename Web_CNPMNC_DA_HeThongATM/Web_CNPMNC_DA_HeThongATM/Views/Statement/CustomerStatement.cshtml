@using Web_CNPMNC_DA_HeThongATM.Models.ViewModel;
@{
    Layout = "~/Views/Shared/_LayoutMain.cshtml";
    var listLSGD = ViewBag.LSGD;
    var check = ViewBag.check;
}
@model CustomerStatementViewModel


<head>
    <style>
        .topform {
            display: flex;
        }

        .form-control {
            border-radius: 20px;
            border: 1px
        }
        /*-------------------listcard*/


        /* Style the container */
        .orangehrm-container {
            background-color: #e8eaef;
            padding: 0.5rem;
        }



        /* Style the table */
        .oxd-table {
            color: var(--oxd-interface-gray-darken-1-color, #64728c);
            font-family: Nunito Sans, sans-serif;
            font-size: .75rem;
            display: flex;
            flex-direction: column;
        }

        /* Style table header */
        .oxd-table-header {
            font-weight: 700;
            display: flex;
            flex-direction: column;
        }

            .oxd-table-header th {
                text-align: left;
            }

        /* Style table rows */
        .oxd-table-row {
            display: flex;
            flex-direction: row;
            flex-wrap: nowrap;
            align-items: center;
            height: 100%;
            padding-left: 5px;
            padding-right: 5px;
        }

        /* Style alternating rows */
        .backgr {
            background-color: #f2f2f2;
        }

        /* Style table cells */
        .oxd-table-cell {
            text-align: left;
        }

        .oxd-padding-cell {
            padding: 5px;
        }

        .oxd-table-body {
            font-weight: 400;
            display: grid;
            grid-gap: 5px;
        }

        .oxd-table-card {
            min-height: 45px;
            border-radius: 1.2rem;
            background-color: var(--oxd-white-color, #fff);
        }

        .oxd-table-row {
            display: flex;
            flex-direction: row;
            flex-wrap: nowrap;
            align-items: center;
            height: 100%;
            padding-left: 5px;
            padding-right: 5px;
        }

        .oxd-table-body {
            font-weight: 400;
            display: grid;
            grid-gap: 5px;
        }

        /* Style checkboxes */
        .oxd-checkbox-wrapper {
            display: inline-block;
            vertical-align: middle;
            margin-right: 10px;
        }

        .oxd-checkbox-input-icon {
            color: var(--oxd-primary-font-color, #fff);
            font-size: 1rem;
            position: absolute;
            line-height: 1.5;
            align-self: center;
        }

        /* Style icons */
        .oxd-icon {
            font-size: 16px;
            vertical-align: middle;
            margin-right: 5px;
        }

        /* Style buttons */

        .oxd-icon-button {
            font-size: 18px;
            font-weight: 400;
            border-radius: 50%;
            border: 0;
            cursor: pointer;
            min-width: 36px;
            min-height: 36px;
            padding: 6px;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            color: var(--oxd-interface-gray-darken-1-color, #64728c);
            background-color: var(--oxd-interface-gray-darken-1-alpha-10-color, rgba(100, 114, 140, .1));
        }

        .oxd-table-row {
            display: flex;
            flex-direction: row;
            flex-wrap: nowrap;
            align-items: center;
            height: 100%;
            padding-left: 5px;
            padding-right: 5px;
        }

        .orangehrm-bottom-container {
            display: flex;
            flex-direction: row;
            flex-wrap: wrap;
            justify-content: flex-end;
            padding: 25px;
            background-color: #befeee;
        }

        .orangehrm-paper-container {
            background-color: #befeee;
            border-radius: 1.2rem;
        }

        .oxd-table-cell {
            overflow-wrap: break-word;
            word-break: break-word;
        }

        .oxd-padding-cell {
            padding: 5px;
        }

        .oxd-table-card-cell-checkbox {
            width: -moz-fit-content;
            width: fit-content;
        }

        .oxd-checkbox-wrapper label {
            cursor: pointer;
            display: flex;
            align-content: center;
            font-family: Nunito Sans, sans-serif;
            color: #64728c;
            font-size: 12px;
            font-weight: 400;
            width: -moz-fit-content;
            width: fit-content;
        }

        .oxd-divider {
            margin-top: 0;
            margin-bottom: 0;
        }

        .oxd-divider {
            border: 0;
            border-top: 1px solid var(--oxd-interface-gray-lighten-2-color, #e8eaef);
        }

        .orangehrm-horizontal-margin {
            margin-left: 25px;
            margin-right: 25px;
        }

        .orangehrm-vertical-padding {
            padding-top: 25px;
            padding-bottom: 25px;
        }

        .orangehrm-horizontal-padding {
            padding-left: 25px;
            padding-right: 25px;
        }

        body {
            color: var(--oxd-interface-gray-darken-1-color, #64728c);
            font-family: Nunito Sans, sans-serif;
            margin-top: 0;
            margin-bottom: 0;
        }

        .oxd-table-cell-actions {
            display: flex;
            flex-direction: row;
            flex-wrap: wrap;
            gap: 5px;
            align-items: center;
        }

        text--span {
            color: var(--oxd-interface-gray-darken-1-color, #64728c);
        }

        .oxd-tex {
            font-family: Nunito Sans, sans-serif;
            margin-top: 0;
            margin-bottom: 0;
        }

        .content {
            width: 100%;
            text-transform: inherit;
        }

        .oxd-table-cell oxd-padding-cell {
            padding: 5px;
        }

        .oxd-table-cell div {
            text-align: left;
        }

    </style>
</head>
<body>
    <div class="content col-lg-12">
        <div class="orangehrm-paper-container">
        </div>
        <div class="orangehrm-paper-container">

            <hr class="oxd-divider orangehrm-horizontal-margin" />
            <form class="topform orangehrm-horizontal-padding orangehrm-vertical-padding" asp-controller="Statement" asp-action="CustomerStatement" method="post">
                @*<div class="topform orangehrm-horizontal-padding orangehrm-vertical-padding">*@
                <div class="card-search col col-md-4">
                    <label for="fromDate">Từ ngày:</label>
                    <input asp-for="fromDate" type="date" id="fromDate" name="fromDate" onchange="check()">

                </div>
                <div class="card-search col col-md-">
                    <label for="toDate">Đến ngày:</label>
                    <input asp-for="toDate" type="date" id="toDate" name="toDate" onchange="check()">
                </div>
                <div class="card-search col col-md-4">
                    <div class="input-group">

                        <input asp-for="cccd" type="text" id="search-input" class="form-control" placeholder="Vui lòng nhập căn cước công dân" onchange="check()">
                        <div class="input-group-btn">
                            <button class="btn btn-info" id="search-button" asp-action="CustomerStatement" asp-controller="Statement" formmethod="post">
                                <i class="fa fa-search"></i> Truy xuất
                            </button>
                        </div>
                    </div>
                </div>
                @*</div>*@
            </form>
            @*************************************************************************@
            <div class="alert alert-danger" id="khongtimthay" role="alert" style="position:absolute;margin-left:25%;opacity:0.9;display:none">
                <h4 class="alert-heading">Kiểm tra lại thông tin!</h4>
                <p>Ngày bắt đầu không được lớn hơn ngày kết thúc, phải nhập căn cước công dân!</p>
                <hr>
            </div>
            @*****************************************************************@
            <div class="alert alert-danger" id="notfound" role="alert" style="position:absolute;margin-left:25%;opacity:0.8;display:none">
                <h4 class="alert-heading">Không tìm thấy thông tin khách hàng!</h4>
                <p>Thông tin khách hàng bạn cần tìm không thể tìm thấy, vui lòng kiểm tra lại giùm chúng tôi!</p>
                <hr>
                <button id="notfound-btn" class="btn btn-danger" onclick="handlerNotFound()">Đã hiểu</button>
            </div>

            @********************************************************************@
            <div class="orangehrm-container">
                <div row-decorator="oxd-table-decorator-card">
                    <div>
                        <div class="oxd-table-row oxd-table-row--with-border">
                            @*   <div>
                            <div>
                            <label class="">
                            <!---->
                            <input type="checkbox">
                            <span>
                            <i class="oxd-icon bi-dash"></i>
                            </span>
                            </label>
                            </div>
                            <!---->
                            </div> *@
                            <div style="flex: 1 1 3%;">
                                <p> Khách Hàng</p>
                            </div>

                            <div style="flex: 1 1 3%;">
                                <p> Đồng Giao Dịch</p>
                            </div>

                            <div style="flex: 1 1 2%;">
                                <p>Ngày Giao Dịch</p>
                            </div>

                            <div style="flex: 1 1 0%;">
                                <p> Số Tiền Chuyển</p>
                            </div>
                            <div style="flex: 1 1 0%;">
                                <p> Số Dư</p>
                            </div>
                            <div style="flex: 1 1 0%;">
                                <p> Trạng Thái</p>
                            </div>
                        </div>
                        <div class="oxd-table-body" id="Card-list">
                            @if(listLSGD != null){
                                @foreach (var item in listLSGD)
                                {
                                    <div class="backgr oxd-table-row oxd-table-row--with-border">
                                        <div class="oxd-table-cell oxd-padding-cell" style="flex: 1 1 0%;">
                                            <div>@item.name1</div>
                                        </div>
                                        <div class="oxd-table-cell oxd-padding-cell" style="flex: 1 1 0%;">
                                            <div>@item.name2</div>
                                        </div>
                                        <div class="oxd-table-cell oxd-padding-cell" style="flex: 1 1 0%;margin-left:30px !important">
                                            <div>@item.date</div>
                                        </div>
                                        <div class="oxd-table-cell oxd-padding-cell" style="flex: 1 1 0%;margin-left:100px !important">
                                            <div>@item.LSGD.SoTienGiaoDich</div>
                                        </div>
                                        <div class="oxd-table-cell oxd-padding-cell" style="flex: 1 1 0%;">
                                            <div>@item.SoDu</div>
                                        </div>
                                        <div class="oxd-table-cell oxd-padding-cell" style="flex: 1 1 0%;">
                                            <div>@item.status</div>
                                        </div>
                                    </div>
                                }
                            }
                          
                        </div>
                        <div class="oxd-table-body" id="CardListContainer">
                            <!-- Partial View sẽ được hiển thị ở đây -->
                        </div>
                    </div>
                </div>
            </div>

    </div>
    @*<script src="/js/ListCard.js"></script>*@
    <script>
        if ("@check" === "undefined") {
            document.getElementById('notfound').style.display = 'block';
            document.getElementById("search-input").value = "";
        }

        if (document.getElementById("search-input").value === "") {
            document.getElementById("search-button").disabled = true;
        }

        if (@Model !== null) {
            document.getElementById("fromDate").value = "@Model.fromDate";
            document.getElementById("toDate").value = "@Model.toDate";
        }


        function handlerNotFound() {
            document.getElementById('notfound').style.display = 'none';
        }
        function check() {
            var from = document.getElementById("fromDate").value;
            var to = document.getElementById("toDate").value;
            var search = document.getElementById("search-input").value;

            var fromDate = new Date(from);
            var toDate = new Date(to);

            if (fromDate > toDate) {
                document.getElementById('khongtimthay').style.display = 'block';
                document.getElementById("search-button").disabled = true;
            }
            else if (fromDate <= toDate && search !== "") {
                document.getElementById('khongtimthay').style.display = 'none';
                document.getElementById("search-button").disabled = false;
            }
        }

    </script>
</body>